var mongodb=require("mongodb").MongoClient,passport=require("passport"),router=function(o){var e=o.Router();return e.post("/signUp",function(o,e){console.log(o.body);var t=require("../config/mongodb").url;console.log(t),mongodb.connect(t,function(t,r){console.log(r+t);var s=r.collection("users"),a={username:o.body.name,password:o.body.password};s.insert(a,function(t,r){o.login(r,function(){e.redirect("/auth/profile")})})})}),e.post("/signIn",passport.authenticate("local",{failureRedirect:"/"}),function(o,e){e.redirect("/auth/profile")}),e.get("/profile",function(o,e){e.json(o.user)}),e.get("/google/callback",passport.authenticate("google",{successRedirect:"/users/",failure:"/error/"})),e.get("/google",passport.authenticate("google",{scope:["https://www.googleapis.com/auth/userinfo.profile","https://www.googleapis.com/auth/userinfo.email"]})),e.get("/facebook/callback",passport.authenticate("facebook",{successRedirect:"/users/",failureRedirect:"/error/"})),e.get("/facebook",passport.authenticate("facebook",{scope:["email"]})),e};module.exports=router;